<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>{{ page.title | default: "ModelHaven Studio" }}</title>

<link rel="stylesheet" href="{{ '/assets/css/style.css' | relative_url }}">
</head>

<body>
<div class="wrap">
  <main class="prose">
    {{ content }}
  </main>
</div>

<!-- Mermaid -->
<script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
<script>
mermaid.initialize({ startOnLoad: true });

document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll("pre > code.language-mermaid").forEach((code) => {
    const pre = code.parentElement;
    const div = document.createElement("div");
    div.className = "mermaid";
    div.textContent = code.textContent;
    pre.replaceWith(div);
  });
  mermaid.init(undefined, document.querySelectorAll(".mermaid"));
});
</script>

<script>
document.addEventListener("DOMContentLoaded", function () {

  document.querySelectorAll(".collapsible").forEach(card => {

    const toggle = card.querySelector(".collapse-toggle");
    const content = card.querySelector(".collapse-content");
    if (!toggle || !content) return;

    let isAnimating = false;

    toggle.setAttribute("role", "button");
    toggle.setAttribute("tabindex", "0");

    const shouldOpen = card.hasAttribute("data-default-open");

    if (shouldOpen) {
      card.classList.add("open");
      toggle.setAttribute("aria-expanded", "true");
      content.style.height = "auto";
      content.style.opacity = "1";
    } else {
      card.classList.remove("open");
      toggle.setAttribute("aria-expanded", "false");
      content.style.height = "0px";
      content.style.opacity = "0";
    }

    function open() {
      if (isAnimating) return;
      isAnimating = true;

      card.classList.add("open");
      toggle.setAttribute("aria-expanded", "true");

      content.style.height = "0px";
      content.offsetHeight;
      content.style.height = content.scrollHeight + "px";
      content.style.opacity = "1";
    }

    function close() {
      if (isAnimating) return;
      isAnimating = true;

      content.style.height = content.scrollHeight + "px";
      content.offsetHeight;
      content.style.height = "0px";
      content.style.opacity = "0";

      card.classList.remove("open");
      toggle.setAttribute("aria-expanded", "false");
    }

    content.addEventListener("transitionend", (e) => {
      if (e.propertyName !== "height") return;

      if (card.classList.contains("open")) {
        content.style.height = "auto";
      }

      isAnimating = false;
    });

    toggle.addEventListener("click", () => {
      card.classList.contains("open") ? close() : open();
    });

    toggle.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") {
        e.preventDefault();
        toggle.click();
      }
    });

  });

});
</script>
<script>
document.addEventListener("DOMContentLoaded", function(){

  const messages = {
    de: "Demnächst verfügbar.",
    fr: "Bientôt disponible.",
    it: "Prossimamente disponibile.",
    es: "Próximamente disponible."
  };

  const toast = document.createElement("div");
  toast.className = "glass-toast";
  document.body.appendChild(toast);

  function showToast(message){
    toast.textContent = message;
    toast.classList.add("show");

    setTimeout(() => {
      toast.classList.remove("show");
    }, 2600);
  }

  document.querySelectorAll(".planned-lang").forEach(link => {

    link.addEventListener("click", function(e){

      if (window.innerWidth > 768) return;

      e.preventDefault();

      const lang = link.dataset.lang;
      showToast(messages[lang] || "Coming soon.");

    });

  });

});
</script>



</body>
</html>
